local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local LOCAL_PLAYER = Players.LocalPlayer

-- GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MiniHub"
screenGui.ResetOnSpawn = false
screenGui.Parent = LOCAL_PLAYER:WaitForChild("PlayerGui")

local toggleBtn = Instance.new("TextButton")
toggleBtn.Size = UDim2.fromOffset(36,36)
toggleBtn.Position = UDim2.new(0,12,0.5,-18)
toggleBtn.Text = "≡"
toggleBtn.TextScaled = true
toggleBtn.BackgroundColor3 = Color3.fromRGB(35,40,45)
toggleBtn.TextColor3 = Color3.fromRGB(255,255,255)
toggleBtn.Draggable = true
toggleBtn.Parent = screenGui

local frame = Instance.new("Frame")
frame.Size = UDim2.fromOffset(160,150)
frame.Position = UDim2.new(0,60,0.5,-75)
frame.BackgroundColor3 = Color3.fromRGB(25,28,33)
frame.Visible = false
frame.Parent = screenGui

local uiCorner = Instance.new("UICorner")
uiCorner.CornerRadius = UDim.new(0,12)
uiCorner.Parent = frame

local function makeButton(text)
    local b = Instance.new("TextButton")
    b.Size = UDim2.fromOffset(140,30)
    b.BackgroundColor3 = Color3.fromRGB(40,45,52)
    b.TextColor3 = Color3.fromRGB(255,255,255)
    b.TextScaled = true
    b.Font = Enum.Font.GothamSemibold
    b.Text = text
    local c = Instance.new("UICorner")
    c.CornerRadius = UDim.new(0,8)
    c.Parent = b
    return b
end

local btnNoclip = makeButton("Noclip: OFF")
btnNoclip.Position = UDim2.fromOffset(10,10)
btnNoclip.Parent = frame

local btnSpeed = makeButton("Velocidade: 16")
btnSpeed.Position = UDim2.fromOffset(10,50)
btnSpeed.Parent = frame

local btnInvisible = makeButton("Invisível: OFF")
btnInvisible.Position = UDim2.fromOffset(10,90)
btnInvisible.Parent = frame

-- Toggle hub
toggleBtn.MouseButton1Click:Connect(function()
    frame.Visible = not frame.Visible
end)

-- Noclip
local noclip = false
RunService.Stepped:Connect(function()
    if noclip and LOCAL_PLAYER.Character then
        for _, part in pairs(LOCAL_PLAYER.Character:GetChildren()) do
            if part:IsA("BasePart") then
                part.CanCollide = false
            end
        end
    end
end)

btnNoclip.MouseButton1Click:Connect(function()
    noclip = not noclip
    btnNoclip.Text = "Noclip: " .. (noclip and "ON" or "OFF")
    if not noclip and LOCAL_PLAYER.Character then
        for _, part in pairs(LOCAL_PLAYER.Character:GetChildren()) do
            if part:IsA("BasePart") then
                part.CanCollide = true
            end
        end
    end
end)

-- Velocidade
local speed = 16
local humanoid = nil

local function updateSpeed()
    if LOCAL_PLAYER.Character then
        humanoid = LOCAL_PLAYER.Character:FindFirstChildOfClass("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = speed
        end
    end
end

btnSpeed.MouseButton1Click:Connect(function()
    speed = speed + 16
    if speed > 128 then speed = 16 end
    btnSpeed.Text = "Velocidade: "..speed
    updateSpeed()
end)

Players.PlayerAdded:Connect(function()
    LOCAL_PLAYER.CharacterAdded:Connect(updateSpeed)
end)

LOCAL_PLAYER.CharacterAdded:Connect(updateSpeed)
updateSpeed()

-- Invisibilidade
local invisible = false
btnInvisible.MouseButton1Click:Connect(function()
    invisible = not invisible
    btnInvisible.Text = "Invisível: " .. (invisible and "ON" or "OFF")
    if LOCAL_PLAYER.Character then
        for _, part in pairs(LOCAL_PLAYER.Character:GetChildren()) do
            if part:IsA("BasePart") or part:IsA("MeshPart") then
                part.Transparency = invisible and 1 or 0
            elseif part:IsA("Accessory") and part:FindFirstChild("Handle") then
                part.Handle.Transparency = invisible and 1 or 0
            end
        end
    end
end)
